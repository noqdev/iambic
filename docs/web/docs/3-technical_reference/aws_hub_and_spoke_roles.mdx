---
title: AWS Hub and Spoke Roles
---

# AWS Hub and Spoke Roles

IAMbic uses a Hub-and-Spoke model to manage AWS. If you configure IAMbic with AWS Organizations,
your AWS Organizations Management Account will serve as the Hub account.
If you configure IAMbic with individual AWS accounts, you will need to specify the account that will
serve as the Hub account. The `IambicHubRole` will be created on this account. The `IambicSpokeRole` role will be created
on all of your AWS accounts (including the Hub account), and it will be assumed by the `IambicHubRole` to perform actions on the accounts.

## Hub Role Permissions

The `IambicHubRole` should have permission to assume any IambicSpokeRole
in the environment, and to list all accounts in AWS Organizations.

See the [IambicHubRole Cloudformation template](https://github.com/noqdev/iambic/blob/main/iambic/plugins/v0_1_0/aws/cloud_formation/templates/IambicHubRole.yml)
for more details.

```
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "organizations:ListAccounts",
        "organizations:ListTagsForResource"
      ],
      "Resource": "*"
    },
    {
      "Effect": "Allow",
      "Action": [
        "sts:AssumeRole",
        "sts:TagSession"
      ],
      "Resource": "*"
    }
  ]
}
```

## Spoke Role Permissions

An `IAMbicSpokeRole` should exist on each account. The IAMbic Setup Wizard will
assist you in creating a Cloudformation StackSet that will configure each of
your accounts with this role automatically.

See the [IambicSpokeRole Cloudformation template](https://github.com/noqdev/iambic/blob/main/iambic/plugins/v0_1_0/aws/cloud_formation/templates/IambicSpokeRole.yml)
for more details.

The IAMbicSpokeRole should have the following policy attached: `arn:aws:iam::aws:policy/ReadOnlyAccess`.

It also needs the following permissions:

```
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "ec2:Describe*",
        "identitystore:*",
        "organizations:describe*",
        "organizations:list*",
        "iam:*",
        "sso:*",
        "secretsmanager:CreateSecret"
      ],
      "Resource": [
        "*"
      ]
    }
  ]
}
```